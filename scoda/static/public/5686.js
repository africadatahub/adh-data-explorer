"use strict";(self.webpackChunkocl_bb_library=self.webpackChunkocl_bb_library||[]).push([[5686],{95686:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var r=a(67294),n=a(13174),o=a(92202),l=(a(17730),a(9669)),c=a.n(l);a(60622);var s=a(9713),i=a(11741),u=a(85677),d=a(10684),m=a(36955),h=(a(46799),a(32985)),f=a(96486),b=a.n(f);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(44448);var N={control:function(e){return E(E({},e),{},{border:"1px solid #4A4A4A",borderRadius:"28px",boxShadow:"none","&:hover":{border:"1px solid #4A4A4A",borderRadius:"28px"}})}};const _=function(){var e=p((0,r.useState)([]),2),t=e[0],a=e[1],n=p((0,r.useState)([]),2),o=n[0],l=n[1],f=p((0,r.useState)([]),2),v=f[0],g=f[1],E=p((0,r.useState)([]),2),y=E[0],_=E[1],w=p((0,r.useState)([]),2),k=w[0],S=w[1],x=p((0,r.useState)([]),2),C=x[0],D=x[1],O=function(e){switch(e){case 0:return"#B7E0DE";case 1:return"#6ABFBB";case 2:return"#2D9B96";default:return"#0F7671"}},P=function(e){switch(e){case 0:return"#FFD0B7";case 1:return"#FFAD81";case 2:return"#EE702D";default:return"#D44F08"}},A=function(e){switch(e){case"Buffalo City":return"BUF";case"City of Cape Town":return"CPT";case"City of Joburg":return"JHB";case"Ekurhuleni":return"EKU";case"Mangaung":return"MAN";case"Msunduzi":return"MSU";case"Nelson Mandela Bay":return"NMA";case"Tshwane":return"TSH";case"eThekwini":return"ETH"}},j=function(e,t,a,r){for(var n=b().map(a,"value"),o=[],l=2e3,c=0;l<=(new Date).getFullYear();){if(e.filter((function(e){return e[1]===l.toString()})).length>0){for(var s=e.filter((function(e){return e[1]===l.toString()})),i=[],u=0;u<s.length;u++){var d=A(s[u][0]);n.includes(d)&&(s[u][0]=d,i.push(s[u][2]),s[u][2]&&s[u][2])}o.push({year:l,data:s,labels:[],values:i,color:r(c)}),c+=1}l+=1}t(o)},F=function(e,t){c().get(e).then((function(e){t(e.data.table)}))},T=function(e){for(var t=[],r=2e3,n=0;r<=(new Date).getFullYear();){if(e.filter((function(e){return e[1]===r.toString()})).length>0){for(var o=e.filter((function(e){return e[1]===r.toString()})),c=[],s=[],i=0;i<o.length;i++)o[i][0]=A(o[i][0]),c.push({label:o[i][0],value:o[i][0]}),s.push(o[i][2]),o[i][2]&&o[i][2];t.push({year:r,labels:c,values:s,color:O(n)}),a(c),l(t),D(c),n+=1}r+=1}l(t)},Z=function(e){for(var t=[],a=2e3,r=0;a<=(new Date).getFullYear();){if(e.filter((function(e){return e[1]===a.toString()})).length>0){for(var n=e.filter((function(e){return e[1]===a.toString()})),o=[],l=[],c=0;c<n.length;c++)n[c][0]=A(n[c][0]),o.push({label:n[c][0],value:n[c][0]}),l.push(n[c][2]),n[c][2]&&n[c][2];t.push({year:a,labels:o,values:l,color:P(r)}),r+=1}a+=1}_(t)},z=function(e){for(var t=[],a=2e3,r=0;a<=(new Date).getFullYear();){if(e.filter((function(e){return e[1]===a.toString()})).length>0){for(var n=e.filter((function(e){return e[1]===a.toString()})),o=[],l=[],c=0;c<n.length;c++)n[c][0]=A(n[c][0]),o.push({label:n[c][0],value:n[c][0]}),l.push(n[c][2]),n[c][2]&&n[c][2];t.push({year:a,labels:o,values:l,color:O(r)}),r+=1}a+=1}g(t)},M=function(e){for(var t=[],a=2e3,r=0;a<=(new Date).getFullYear();){if(e.filter((function(e){return e[1]===a.toString()})).length>0){for(var n=e.filter((function(e){return e[1]===a.toString()})),o=[],l=[],c=0;c<n.length;c++)n[c][0]=A(n[c][0]),o.push({label:n[c][0],value:n[c][0]}),l.push(n[c][2]),n[c][2]&&n[c][2];t.push({year:a,labels:o,values:l,color:P(r)}),r+=1}a+=1}S(t)};return(0,r.useEffect)((function(){F("/api/explore/codebook?indicator_id=989",T),F("/api/explore/codebook?indicator_id=985",Z),F("/api/explore/codebook?indicator_id=987",z),F("/api/explore/codebook?indicator_id=983",M)}),[]),r.createElement("div",null,o.length<1&&v.length<1&&y.length<1&&k.length<1?r.createElement(u.Z,{id:"loader",isOpen:o.length<1&&v.length<1&&y.length<1&&k.length<1,className:"modal-dialog-centered loader"},r.createElement(d.Z,null,r.createElement("div",{className:"row"},r.createElement("div",{className:"col-2"}),r.createElement("div",{className:"col-0 ml-3 pt-4"},r.createElement(m.Z,{type:"grow",color:"secondary",size:"sm"}),r.createElement(m.Z,{type:"grow",color:"success",size:"sm"}),r.createElement(m.Z,{type:"grow",color:"danger",size:"sm"}),r.createElement(m.Z,{type:"grow",color:"warning",size:"sm"})),r.createElement("div",{className:"col-0 pt-4 pl-4 float-left"},"Loading Content...")),r.createElement("br",null))):"",r.createElement("div",{className:"container-fluid charts_dashboards"},r.createElement("div",{className:"charts_dashboards--left_container p-0"},r.createElement("div",{className:"charts_dashboards--select"},r.createElement("div",{className:"charts_dashboards--select-container"},r.createElement(s.ZP,{id:"multiple",name:"filters",placeholder:"Filter City",value:C,options:t,onChange:function(e){D(e),l([]),_([]),S([]),g([]),c().get("/api/explore/codebook?indicator_id=989").then((function(t){j(t.data.table,l,e,O)})),c().get("/api/explore/codebook?indicator_id=989").then((function(t){j(t.data.table,_,e,P)})),c().get("/api/explore/codebook?indicator_id=987").then((function(t){j(t.data.table,g,e,O)})),c().get("/api/explore/codebook?indicator_id=983").then((function(t){j(t.data.table,S,e,P)}))},isMulti:!0,styles:N}))),r.createElement("div",{className:"charts_dashboards--barcharts"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-6"},r.createElement("div",{className:"charts"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-9"},r.createElement("h1",{className:"charts_dashboards--households"},"National Election: Voter Turnout")),r.createElement("div",{className:"col-md-3"},r.createElement(i.Z,{className:"charts_dashboards--button",text:"Raw Data",href:"/scoda/toolkit#/codebook-explorer/989",target:"_blank"}))),r.createElement(h.Z,{data:{labels:b().map(C,"label"),datasets:o.map((function(e){return{backgroundColor:e.color,borderColor:e.color,data:e.values,label:e.year,stack:e.year}}))},stepSize:2e5,hundred:!0,divide:1e3,x_label:"Number of People"}))),r.createElement("div",{className:"col-md-6"},r.createElement("div",{className:"charts"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-9"},r.createElement("h1",{className:"charts_dashboards--households"},"National Election: Registered Voters")),r.createElement("div",{className:"col-md-3"},r.createElement(i.Z,{className:"charts_dashboards--button",text:"Raw Data",href:"/scoda/toolkit#/codebook-explorer/985",target:"_blank"}))),r.createElement(h.Z,{data:{labels:b().map(C,"label"),datasets:y.map((function(e){return{backgroundColor:e.color,borderColor:e.color,data:e.values,label:e.year,stack:e.year}}))},stepSize:5e5,hundred:!0,divide:1e3,x_label:"Number of People"})))),r.createElement("hr",null),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-6"},r.createElement("div",{className:"charts"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-9"},r.createElement("h1",{className:"charts_dashboards--households"},"Local Election: Voter Turnout")),r.createElement("div",{className:"col-md-3"},r.createElement(i.Z,{className:"charts_dashboards--button",text:"Raw Data",href:"/scoda/toolkit#/codebook-explorer/987",target:"_blank"}))),r.createElement(h.Z,{data:{labels:b().map(C,"label"),datasets:v.map((function(e){return{backgroundColor:e.color,borderColor:e.color,data:e.values,label:e.year,stack:e.year}}))},stepSize:5e5,hundred:!0,divide:1e3,x_label:"Number of People"}))),r.createElement("div",{className:"col-md-6"},r.createElement("div",{className:"charts"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-9"},r.createElement("h1",{className:"charts_dashboards--households"},"Local Election: Registered Voters")),r.createElement("div",{className:"col-md-3"},r.createElement(i.Z,{className:"charts_dashboards--button",text:"Raw Data",href:"/scoda/toolkit#/codebook-explorer/983",target:"_blank"}))),r.createElement(h.Z,{data:{labels:b().map(C,"label"),datasets:k.map((function(e){return{backgroundColor:e.color,borderColor:e.color,data:e.values,label:e.year,stack:e.year}}))},stepSize:2e5,hundred:!0,divide:1e3,x_label:"Number of People"}))))))),r.createElement("div",{className:"spacer"}))},w=function(){return r.createElement("div",{className:"sorc_dashboards"},r.createElement("div",{className:"spacer--top"}),r.createElement(o.default,{name:"State of Cities Reports",dropdownName:"Citizen Engagement",dropDownItem:{dropdownMenu:[{name:"Service Delivery",href:"socr#/service_delivery",active:!1},{name:"Citizen Engagement",href:"socr#/citizen_engagement",active:!0},{name:"Municipal Human Resources",href:"socr#/human_resources",active:!1},{name:"People and Households",href:"socr#/people_household",active:!1},{name:"Employment",href:"socr#/employment",active:!1},{name:"Dwellings",href:"socr#/dwellings",active:!1},{name:"Household Income",href:"socr#/household_income",active:!1},{name:"Food Security, Literacy and Inequality",href:"socr#/food_security",active:!1},{name:"Life Expectancy and Health",href:"socr#/life_expectancy",active:!1},{name:"Education",href:"socr#/education",active:!1},{name:"Sustainability",href:"socr#/sustainability",active:!1},{name:"ICT Infrastructure",href:"socr#/infrastructure",active:!1},{name:"Transport Mode",href:"socr#/transport_mode",active:!1},{name:"Public Transport Spend",href:"socr#/public_transport_spend",active:!1},{name:"Travel Time",href:"socr#/travel_time",active:!1}]},buttonText:"Download as PNG"}),r.createElement(n.default,null),r.createElement("div",{id:"content",className:"sorc_dashboards sorc_dashboards--citizen_engagement"},r.createElement(_,null)))}}}]);